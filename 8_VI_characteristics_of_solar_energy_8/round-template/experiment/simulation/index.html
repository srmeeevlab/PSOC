<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V-I characteristics of solar energy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <nav class="navbar navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><img src="images/srm-logo-white.png" alt="SRM Logo"></a>
            <span id="exp-title">V-I characteristics of solar energy</span>
            <span id="navbar-settings">
                <span id="nav-help" title="Help">

                    <div class="dropdown">
                        <button class="btn dropdown-toggle btn btn-custom-outline-brown w-100 d-block" type="button"
                            id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" onclick="console.log('Clicked');">
                            Help
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                                    data-bs-target="#modal1">Procedure</a></li>
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                                    data-bs-target="#modal2">Theory</a></li>
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal"
                                    data-bs-target="#modal3">Input Variables</a></li>
                        </ul>
                    </div>
                </span>
            </span>
        </div>
    </nav>

    <div class="modal fade" id="modal1" aria-hidden="true" aria-labelledby="modal1Label" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal1Label">Simulation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="procedure">
                    <h2>Procedure:</h2>
                    <h5>The user has to provide the input values to run the simulator. The following steps help the user to explore the platform.</h5>
                    <ul>
                        <li>Step 1: Provide the values in respective input fields and click on "PLOT" button to plot a graph.
                        </li>
                        <li>Step 2: A new graph is plotted each time in both V vs I and V vs P when "PLOT" button is clicked.</li>
                        <li>Step 3: If "HOLD" button and "PLOT" button are clicked consecutively, new graph and the previous graph can be viewed simultaneously.</li>
                        <li>Step 4: This can be used to check the difference in the plot of the graphs when different inputs are given.
                        </li>
                        <li>Step 5: </li>
                        <li>Step 6: Simulator has a graph provided(black-colored) by default.</li>
                        <li>Step 7: Change the input values and try to match the graph provided.
                        </li>

                    </ul>
                </div>
                <div class="modal-footer">

                    <button class="btn btn-primary" data-bs-target="#modal2" data-bs-toggle="modal" data-bs-dismiss="modal">Next</button>
                    <button class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modal2" aria-hidden="true" aria-labelledby="modal2Label" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal2Label">Theory</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Solar cells are the fundamental building blocks of solar energy generating systems, since they collect electrical energy directly from light energy without any intermediary steps. A solar cell's operation is purely dependent on its
                        photovoltaic effect, which is why it is also known as a photovoltaic cell. <br>
                        A semiconductor device is what a solar cell is. The voltage or potential difference established across the terminals of the solar cell is fixed at 0.5 volt
                        and is nearly independent of the intensity of incident light, whereas the current capacity of the cell is nearly proportional to the intensity of incident light as well as the area that is exposed to the light. Solar cells, like
                        all other types of battery cells, have one positive and one negative terminal. A solar or photovoltaic cell typically contains negative front and positive rear contacts. In the midst of these two connections lies a semiconductor
                        p-n junction. <br>
                        Some photons of light are absorbed by the solar cell when sunlight falls on it. Some of the absorbed photons will have an energy larger than the energy gap between the semiconductor crystal's valence and conduction
                        bands. As a result of receiving energy from one photon, one valence electron becomes excited and leaps out of the bond, forming an electronhole pair. Light-generated electrons and holes are electrons and holes produced by e-h pairs.
                        Due to the electrostatic force of the field across the junction, light-generated electrons near the p-n junction migrate to the n-type side of the junction. Due to the same electrostatic force, light-generated holes at the junction
                        migrate to the p-type side of the junction. <br>
                        A potential difference is generated between two sides of the cell in this manner, and if these two sides are linked by an external circuit, current will flow from the solar cell's positive
                        to negative terminal. This was the fundamental operating concept of a solar cell; now we'll go through the many aspects of a solar or photovoltaic cell that influence the solar panel's rating. It is critical to understand a solar
                        panel's ratings when selecting a specific solar cell for a certain project. These numbers indicate how well a solar cell can convert light into energy.
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-bs-target="#modal1" data-bs-toggle="modal" data-bs-dismiss="modal">Previous</button>
                    <button class="btn btn-primary" data-bs-target="#modal3" data-bs-toggle="modal" data-bs-dismiss="modal">Next</button>
                    <button class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modal3" aria-hidden="true" aria-labelledby="modal3Label" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modal3Label">Input Variable</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    
                    <table style="margin-top:1rem ;">
                        <tr>
                            <th>Field</th>
                            <th>Explanation</th>
                            <th>General Range</th>
                        </tr>
                        <tr>
                            <td>Bandgap energy </td>
                            <td>The energy band gaps of silicon and germanium material.  It is denoted as Eg</td>
                            <td>1.1 eV and 0.7 eV</td>
                        </tr>
                        <tr>
                            <td>Number of Series cell :</td>
                            <td>Number of pv cells that are connected in series to the solar panel</td>
                            <td>1-100 
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>Number of parallel cells</td>
                            <td>Number of pv cells that are connected in parallel to the solar panel</td>
                            <td>1-100 
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>Series resistance rs :</td>
                            <td>Value of series resistance used in the PV cell (refer data sheet of the Solar panel Manufacturer)</td>
                            <td>0.1-1
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>shunt resistance rsh:</td>
                            <td>Value of parallel resistance used in the PV cell (refer data sheet provided by the Solar panel Manufacturer)</td>
                            <td>0.1-1
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>Open circuit voltage:</td>
                            <td>Open circuit voltage of the solar panel (refer data sheet provided by the Solar panel Manufacturer)</td>
                            <td>0.1	mV- 50 V
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>Short circuit current:</td>
                            <td>Short circuit currrent of the solar panel (refer data sheet provided by the Solar panel Manufacturer)</td>
                            <td>0.2	mA- 15 A
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>Diode saturation current:</td>
                            <td>Diode saturation current value</td>
                            <td>0.00006-0.001 A
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>Current Coefficient:</td>
                            <td>Short circuit current of the solar panel (refer data sheet provided by the Solar panel Manufacturer)</td>
                            <td>0.01	– 0.4
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>ambient temperature :</td>
                            <td>Ambient temperature or cell reference temperature </td>
                            <td>25 0C
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>nominal operating cell temperature:</td>
                            <td>Operating cell temperature of the PV panel</td>
                            <td>25 0C to 80 0C
                                (But not restricted)
                                </td>
                        </tr>
                        <tr>
                            <td>Irradiance:</td>
                            <td>Insolation or irradiation of  the PV panel (W/m2`)</td>
                            <td>0 W/m 2  to 2000  W/m 2</td>
                        </tr>
                        
                    </table>
                    <div id="formulae">
                        <img src="images/exp5_form2.PNG" alt="img1">
                        <img src="images/exp5_form2.PNG" alt="img2">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-bs-target="#modal2" data-bs-toggle="modal" data-bs-dismiss="modal">Previous</button>
                    <button class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <main>

        <div class="container-fluid">
            <div class="row" id="main-div">
                <div class="col-2 px-0" id="input-col">
                    <div class="input">
                        <h5>INPUT</h5>

                        <div class="inps">
                            <label for="eg">Bandgap energy :</label>
                            <input onchange="exe()" type="number" id="eg" name="eg" value="1.166">
                        </div>
                        <div class="inps"> <label for="ns">Number of Series cell :</label>
                            <input onchange="exe()" type="number" id="ns" name="ns" value="35">
                        </div>


                        <div class="inps"> <label for="np"> Number of parallel cells :</label>
                            <input onchange="exe()" type="number" id="np" name="np" value="5">
                        </div>
                        <div class="inps"> <label for="rs">Series resistance rs :</label>
                            <input onchange="exe()" type="number" id="rs" name="rs" value="0.000006">
                        </div>
                        <div class="inps"> <label for="rsh"> shunt resistance rsh:</label>
                            <input onchange="exe()" type="number" id="rsh" name="rsh" value="5000">
                        </div>




                        <div class="inps"> <label for="voc">Open circuit voltage:</label>
                            <input onchange="exe()" type="number" id="voc" name="voc" value="21.5">
                        </div>
                        <div class="inps"> <label for="isc">Short circuit current:</label>
                            <input onchange="exe()" type="number" id="isc" name="isc" value="1.2">
                        </div>

                        <div class="inps"> <label for="io">Diode saturation current :</label>
                            <input onchange="exe()" type="number" id="io" name="io" value="0.00000002">
                        </div>
                        <div class="inps"> <label for="ki">Current Coefficient :</label>
                            <input onchange="exe()" type="number" id="ki" name="ki" value="0.0044">
                        </div>



                        <div class="inps"> <label for="ta">ambient temperature :</label>
                            <input onchange="exe()" type="number" id="ta" name="ta" value="50">
                        </div>
                        <div class="inps"> <label for="noct">nominal operating cell temperature:</label>
                            <input onchange="exe()" type="number" id="noct" name="noct" value="45">
                        </div>
                        <div class="inps"> <label for="gra">Irradiance:</label>
                            <input onchange="exe()" type="number" id="gra" name="gra" value="1000">
                        </div>

                    </div>




                </div>

                <div class="col-10 p-5 m-0 ">
                    <div class="outputs">
                        <div class="d-flex flex-column bd-highlight">
                            <div class="p-2 bd-highlight" id="heading">
                                <div class="buttons">
                                    <span><button id="" class=" btn btn-light  each-bu" onclick="PLOT()">Plot</button>
                                        <button id="holdbut" class=" btn btn-light each-bu" onclick=" HOLD() ">Hold</button>
                                        <button id="toggle" class="btn btn-light each-bu" onclick=" hide() ">Hide</button>
                                        <button id="checkans" class="btn btn-light each-bu" onclick=" checkans();startInteraction(data[1]); ">Check Answer</button>
                                    </span>
                                </div>
                            </div>
                            <div class="p-2 bd-highlight">
                                <div class="row">

                                    <div>
                                        <ul class="nav nav-tabs">
                                            <li class="nav-item">
                                                <a class="nav-link text-decoration-none text-reset active" aria-current="page" href="#VVSI" onclick="document.getElementsByClassName('tabv')[0].classList.remove('tabv');document.getElementById('graph1').classList.add('tabv');document.getElementsByClassName('active')[0].classList.remove('active');this.classList.add('active')">
                                                    V vs I </a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link text-decoration-none text-reset " href="#VVSP" onclick="document.getElementsByClassName('tabv')[0].classList.remove('tabv');document.getElementById('graph2').classList.add('tabv');document.getElementsByClassName('active')[0].classList.remove('active');this.classList.add('active')">
                                                    V vs P</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div>
                                        <div class="tabs tabv" id="graph1">
                                            <canvas id="VVSI" style="background-color: white;"></canvas>
                                        </div>
                                        <div class="tabs" id="graph2">
                                            <canvas id="VVSP" style="background-color: white;"></canvas>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>
    <div class="modal fade" id="quizModal" tabindex="-1" aria-labelledby="quizModal" style="display: none;" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="quiz-title" class="modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="quiz-body"></p>
                    <div id="quiz-select">

                    </div>
                    <div id="quiz-result">

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button id="quiz-previous" type="button" class="btn btn-primary" onclick="previousInteraction();">Previous</button>
                    <button id="quiz-next" type="button" class="btn btn-primary" onclick="nextInteraction();">Next</button>
                    <button id="quiz-submit" type="button" class="btn btn-success" onclick="checkAns();">Check Answer</button>
                </div>
            </div>
        </div>
    </div>
    <footer class="p-3">
        Copyright © 2022 - <span id="year">2022</span> Department of Electrical and Electronics Engineering, SRM
        Institute
        of Science and Technology, Kattankulathur<br> PALS-VLAB initiative, in collaboration with NITK as Technology
        Partner
    </footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.4.0/math.js" integrity="sha512-sUg3/7DzyxwAwb2W5qbB9gWu/gsrJle/GN+AF4RJlQh38CT3xhL4jsW4iiCVRIErDWm0oz6mF9LCcehU1mwxcg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.5.2/math.js" integrity="sha512-vdwP2fMacZZUetdvY+t/hsPJfEeifOcTBv0zYwUyj5qj3NbMvIFg87DxanM5dwqpu4yZkPry5VZv9TnQrll6tg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="./js/quiz.js"></script>
<script src="js/app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script>
    let ask_post_quiz = true;
    function nonzero(NUM) {
        if (NUM > 0) return NUM
    }
    const data_VvsI = {
        labels: [],
        datasets: []
    }
    const config_VvsI = {
        type: 'line',
        data: data_VvsI,

        options: {
            title: {
                display: true,
                text: 'Voltage Vs Current - VI characteristics'
            },
            scales: {
                xAxes: [{
                    gridLines: {
                        lineWidth: 0,
                        color: "rgba(255,255,255,0)"
                    },
                    scaleLabel: {
                        display: true,
                        labelString: 'Voltage (V)'
                    }
                }],
                yAxes: [{
                    ticks: {
                        min: 0,
                        stepSize: 2,
                        fixedStepSize: 1,
                    },
                    scaleLabel: {
                        display: true,
                        labelString: 'Current (I)'
                    }

                }],

                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        callback: function(val, i) {
                            console.log("helppppppppp");
                            return this.getLabelForValue(val).toFixed(2);
                        }

                    }
                },
                y: [{
                    grid: {
                        display: false
                    },
                    title: {
                        display: true,
                        text: "hello there"
                    }
                }]
            },

            legend: {
                display: true,
                labels: {
                    color: 'rgb(255, 99, 132)'
                }
            }
        }



    };
    const ctx1 = document.getElementById('VVSI').getContext('2d');
    const Chart1 = new Chart(
        ctx1,
        config_VvsI
    );

    const data_VvsP = {
        labels: [],
        datasets: []
    }

    const config_VvsP = {
        type: 'line',
        data: data_VvsP,
        options: {
            title: {
                display: true,
                text: 'Voltage Vs Power -  PV characteristics',
            },
            scales: {
                xAxes: [{
                    gridLines: {
                        lineWidth: 0,
                        color: "rgba(255,255,255,0)"
                    },
                    scaleLabel: {
                        display: true,
                        labelString: 'Voltage (V)'
                    }
                }],
                yAxes: [{
                    ticks: {
                        min: 0,
                        stepSize: 2,
                        fixedStepSize: 1,
                    },
                    scaleLabel: {
                        display: true,
                        labelString: 'Power (P)'
                    }

                }],
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        beginAtZero: true,
                        callback: function(value) {
                            console.log(chart2.data.labels[value].toFixed(1));
                            return (chart2.data.labels[value].toFixed(1));
                        }
                    },
                    scaleLabel: {
                        display: true,
                        labelString: 'Voltage (V)'
                    },
                },
                y: {
                    grid: {
                        display: false
                    }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'V vs P',
                }
            }
        }



    };
    const ctx2 = document.getElementById('VVSP').getContext('2d');
    const Chart2 = new Chart(
        ctx2,
        config_VvsP
    );

    question();
</script>
<script src="./app.js"></script>
<script src="./js/quiz.js"></script>

</html>